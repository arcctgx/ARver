.TH ARVER 1 "March 2025" "User Manual"
.SH NAME
arver - Verify audio tracks ripped from a CD against AccurateRip database

.SH SYNOPSIS
.B arver
[OPTIONS] file [file ...]

.SH DESCRIPTION
.B arver
is a command-line program for verifying audio tracks ripped from a CD against
checksums stored in the AccurateRip database.

AccurateRip verification relies on the principle that it is virtually
impossible to get identical errors when ripping different copies of the same CD
on various drives. If a disc is scratched or degraded, read errors will occur
in different sectors. CD drive defects are unlikely to manifest in the same way
on different machines. Therefore, if multiple users submit the same checksum to
the database, it strongly indicates a correct rip. Conversely, if a checksum is
unique, it likely means that errors occurred during ripping.

The idea behind AccurateRip verification is that it's virtually impossible to
get exact same errors when ripping different copies of the same CD on various
CD drives. If the copies are scratched or otherwise degraded, read errors will
occur in different disc sectors. CD drive defects are unlikely to manifest in
the same way on different machines. Essentially, all read errors are expected
to be unique, but in the absence of errors only a single correct result exists.
AccurateRip database stores track checksums submitted by multiple users. When
many users rip the same disc without errors, correct checksums are submitted to
the database repeatably, boosting their "confidence" statistic. If a checksum
of a ripped track is not found in the database, it indicates that the result is
unique, meaning that disc read errors likely occurred while ripping.

The Disc Table of Contents (TOC) necessary for AccurateRip lookup can be
obtained in three ways:
.IP \[bu] 2
Reading a physical CD in the drive (default and recommended if the disc
contains data tracks).
.IP \[bu] 2
Querying the MusicBrainz database using a disc ID.
.IP \[bu] 2
Estimating from the lengths of the provided audio tracks.

.P
.B arver
calculates AccurateRip checksums for local files, fetches checksums for a given
CD from the database, and compares them.

WAV and FLAC audio formats are supported.

Audio files must be corrected for CD drive read offset (e.g., using the '-O'
option in \fBcdparanoia\fR). AccurateRip verification requires correctly
offset-corrected files; otherwise, the checksums will not match database
entries, and all tracks will fail verification.

Some discs contain audio content hidden in the pregap of track one. Many CD
rippers (e.g., \fBEAC\fR or \fBcdparanoia\fR) can detect and extract it, but
AccurateRip does not store checksums for these tracks. \fBarver\fR will detect
track one pregap and display it in the CD TOC summary. If the ripper extracted
the pregap track, do not include it in the file list; otherwise, it will
disrupt track sequencing and cause verification errors. Use the \fB-x\fR or
\fB--exclude\fR option to ignore pregap tracks.

AccurateRip does not store checksums for the last audio tracks on Mixed Mode
CDs. These tracks will always show as \fBN/A\fR in the results summary.

The typical use case for \fBarver\fR is to verify audio files immediately after
ripping, while the CD is still in the drive.

By default, files named track00.cdda.wav, track00.wav, track00.cdda.flac, or
track00.flac are assumed to be pregap tracks and are filtered out.

.B arver
supports an alternative mode where disc information is obtained from
MusicBrainz by disc ID lookup. This method is only reliable for Audio CDs, as
MusicBrainz disc IDs do not encode data track information, which is necessary
for AccurateRip verification. Attempting to verify Enhanced or Mixed Mode CDs
using disc ID lookup may fail or produce incorrect results.

As an expert feature, \fBarver\fR can estimate a disc TOC from the lengths of
provided audio files (\fB-t\fR, \fB--track-lengths\fR). However, this method
requires manual intervention to specify the presence of pregap or data tracks.
Options \fB-D\fR/\fB--data-length\fR and \fB-P\fR/\fB--pregap-length\fR allow
specifying these lengths if known from another source. Even a small mistake in
length can result in an incorrect disc ID. If the data track length is
provided, \fBarver\fR will assume the disc is an Enhanced CD. Verifying Mixed
Mode CDs this way is not supported.

.SH OPTIONS
.TP
.B file
Audio files to use for checksum calculation. Must be specified in correct order.

.TP
.B \-d, \-\-drive device_path
Read disc TOC from a CD in the specified drive (e.g. /dev/sr0).

.TP
.B \-i, \-\-disc-id disc_id
Get disc TOC from MusicBrainz by disc ID query.

.TP
.B \-t, \-\-track-lengths
Derive disc TOC from the lengths of audio tracks.

.TP
The options \-d, \-i, and \-t are mutually exclusive.

.TP
.B \-p, \-\-permissive
Ignore mismatched track lengths.

.TP
.BI -x " " --exclude=pattern
Exclude files matching the specified pattern. Can be used multiple times.

.TP
.BI -1 " " --use-arv1
Use only AccurateRip version 1 (ARv1) checksums for verification.

.TP
.B \-f, \-\-find-offset
Perform offset detection, do not verify.

.TP
.B \-F, \-\-find-offsets-harder
Perform offset detection by brute force search, do not verify.

.TP
.B \-P, \-\-pregap-length frames
Specify the length of track one pregap in CDDA frames (default: 0).

.TP
.B \-D, \-\-data-length frames
Specify the length of Enhanced CD data track in CDDA frames (default: 0).

.TP
.B \-v, \-\-version
Show program version and exit.

.SH USAGE NOTES
AccurateRip database does not store checksums of last audio tracks in Mixed
Mode CDs. These tracks cannot be verified and their verification status will
always show as `N/A` in the results summary.

The regular use case of \fBARver\fR is to verify a set of audio files right
after they have been ripped, while the CD they have been ripped from is still
in the drive.

Commands \fBarver\fR and \fBarver-discinfo\fR support an alternative mode of
operation, where disc information is downloaded from MusicBrainz by disc ID
lookup. While this can be useful, it is reliable only for Audio CDs.
Information about data tracks is not encoded in MusicBrainz disc ID, but it is
necessary to calculate AccurateRip disc ID. Attempts to verify discs with data
tracks (Enhanced or Mixed Mode CDs) using disc ID lookup may not work at all,
result in false negatives, or low confidence values.

.B ARver
can try to guess the disc TOC based on the lengths of provided audio files with
\-t/\-\-track-lengths option. This is considered expert usage: there is no way
to know that files were ripped from a CD containing a pregap track or a data
track, but it affects disc ID calculation. Options \-D/\-\-data-length and
\-P/\-\-pregap-length can be used to provide this information if it is known
from another source. Note that the lengths must be specified exactly: even an
off-by-one mistake will result in a different (and probably wrong) disc ID. If
the data track length is provided, \fBARver\fR will calculate the disc ID as if
it was an Enhanced CD. Verifying Mixed Mode CDs this way is not supported.

.SH EXAMPLES
Verify audio files against AccurateRip:
.RS
.B arver track01.wav track02.wav track03.wav
.RE

Read TOC from a CD drive:
.RS
.B arver -d /dev/sr0 track01.wav track02.wav
.RE

Use MusicBrainz disc ID lookup:
.RS
.B arver -i 12345678 track01.wav track02.wav
.RE

Find offset without verification:
.RS
.B arver -f track01.wav track02.wav
.RE

.SH AUTHOR
Written by User.

.SH SEE ALSO
.BR cdparanoia (1), cdrdao (1)

.SH BUGS
Report issues to the project repository or author.
